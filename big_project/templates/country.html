<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détails pour {{ country }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <h1>Détails pour {{ country }}</h1>

    <h2>Pourcentages d'utilisation des sources</h2>
    <table>
        <tr>
            <th>Source</th>
            <th>% d’utilisation</th>
            <th>Médiane de gCO2/kWh</th>
            <th>Contribution en gCO2/kWh</th>
        </tr>
        {% for source, info in contributions.items() %}
        <tr>
            <td>{{ source }}</td>
            <td>{{ info.percentage }}%</td>
            <td>{{ info.factor }}</td>
            <td>{{ "%.2f"|format(info.contribution) }}</td>
        </tr>
        {% endfor %}
    </table>

    <h2>Émission totale: {{ "%.2f"|format(total_emission) }} gCO2/kWh</h2>

    {% if not is_region %}
    <h2>Calcul Annuel</h2>
    <form action="/calculate" method="post">
        <input type="hidden" name="country" value="{{ country }}">
        <label for="kw">Consommation électrique continue (kW):</label>
        <input type="number" step="0.01" name="kw" required>
        <button type="submit">Calculer</button>
    </form>
    {% endif %}

    <a href="/">Retour</a>
</body>

</html>